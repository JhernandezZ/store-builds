{
  "version": 3,
  "file": "of-action.js",
  "sources": [
    "ng://@ngxs/store/packages/store/src/operators/of-action.ts"
  ],
  "sourcesContent": [
    "import { OperatorFunction, Observable } from 'rxjs';\r\nimport { map, filter } from 'rxjs/operators';\r\nimport { getActionTypeFromInstance } from '../utils/utils';\r\nimport { ActionContext, ActionStatus } from '../actions-stream';\r\n\r\nexport function ofAction<T>(allowedType): OperatorFunction<any, T>;\r\nexport function ofAction<T>(...allowedTypes): OperatorFunction<any, T>;\r\n\r\n/**\r\n * RxJS operator for selecting out specific actions.\r\n *\r\n * This will grab actions that have just been dispatched as well as actions that have completed\r\n */\r\nexport function ofAction(...allowedTypes: any[]) {\r\n  return ofActionOperator(allowedTypes);\r\n}\r\n\r\n/**\r\n * RxJS operator for selecting out specific actions.\r\n *\r\n * This will ONLY grab actions that have just been dispatched\r\n */\r\nexport function ofActionDispatched(...allowedTypes: any[]) {\r\n  return ofActionOperator(allowedTypes, ActionStatus.Dispatched);\r\n}\r\n\r\n/**\r\n * RxJS operator for selecting out specific actions.\r\n *\r\n * This will ONLY grab actions that have just been successfully completed\r\n */\r\nexport function ofActionSuccessful(...allowedTypes: any[]) {\r\n  return ofActionOperator(allowedTypes, ActionStatus.Successful);\r\n}\r\n\r\n/**\r\n * RxJS operator for selecting out specific actions.\r\n *\r\n * This will ONLY grab actions that have just been canceled\r\n */\r\nexport function ofActionCanceled(...allowedTypes: any[]) {\r\n  return ofActionOperator(allowedTypes, ActionStatus.Canceled);\r\n}\r\n\r\n/**\r\n * RxJS operator for selecting out specific actions.\r\n *\r\n * This will ONLY grab actions that have just thrown an error\r\n */\r\nexport function ofActionErrored(...allowedTypes: any[]) {\r\n  return ofActionOperator(allowedTypes, ActionStatus.Errored);\r\n}\r\n\r\nfunction ofActionOperator(allowedTypes: any[], status?: ActionStatus) {\r\n  const allowedMap = createAllowedMap(allowedTypes);\r\n  return function(o: Observable<any>) {\r\n    return o.pipe(filterStatus(allowedMap, status), mapAction());\r\n  };\r\n}\r\n\r\nfunction filterStatus(allowedTypes: { [key: string]: boolean }, status?: ActionStatus) {\r\n  return filter((ctx: ActionContext) => {\r\n    const actionType = getActionTypeFromInstance(ctx.action);\r\n    const type = allowedTypes[actionType];\r\n    return status ? type && ctx.status === status : type;\r\n  });\r\n}\r\n\r\nfunction mapAction() {\r\n  return map((ctx: ActionContext) => ctx.action);\r\n}\r\n\r\nfunction createAllowedMap(types: any[]): { [key: string]: boolean } {\r\n  return types.reduce((acc: any, klass: any) => {\r\n    acc[getActionTypeFromInstance(klass)] = true;\r\n    return acc;\r\n  }, {});\r\n}\r\n"
  ],
  "names": [],
  "mappings": "AACA,OAAO,EAAE,GAAG,EAAE,MAAM,EAAE,MAAM,gBAAgB,CAAC;AAC7C,OAAO,EAAE,yBAAyB,EAAE,MAAM,gBAAgB,CAAC;;;;;;AAW3D,MAAM,mBAAmB,GAAG,YAAmB;IAC7C,MAAM,CAAC,gBAAgB,CAAC,YAAY,CAAC,CAAC;CACvC;;;;;;AAOD,MAAM,6BAA6B,GAAG,YAAmB;IACvD,MAAM,CAAC,gBAAgB,CAAC,YAAY,gCAA0B,CAAC;CAChE;;;;;;AAOD,MAAM,6BAA6B,GAAG,YAAmB;IACvD,MAAM,CAAC,gBAAgB,CAAC,YAAY,gCAA0B,CAAC;CAChE;;;;;;AAOD,MAAM,2BAA2B,GAAG,YAAmB;IACrD,MAAM,CAAC,gBAAgB,CAAC,YAAY,4BAAwB,CAAC;CAC9D;;;;;;AAOD,MAAM,0BAA0B,GAAG,YAAmB;IACpD,MAAM,CAAC,gBAAgB,CAAC,YAAY,0BAAuB,CAAC;CAC7D;AAED,0BAA0B,YAAmB,EAAE,MAAqB;IAClE,MAAM,UAAU,GAAG,gBAAgB,CAAC,YAAY,CAAC,CAAC;IAClD,MAAM,CAAC,UAAS,CAAkB;QAChC,MAAM,CAAC,CAAC,CAAC,IAAI,CAAC,YAAY,CAAC,UAAU,EAAE,MAAM,CAAC,EAAE,SAAS,EAAE,CAAC,CAAC;KAC9D,CAAC;CACH;AAED,sBAAsB,YAAwC,EAAE,MAAqB;IACnF,MAAM,CAAC,MAAM,CAAC,CAAC,GAAkB,EAAE,EAAE;QACnC,MAAM,UAAU,GAAG,yBAAyB,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;QACzD,MAAM,IAAI,GAAG,YAAY,CAAC,UAAU,CAAC,CAAC;QACtC,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC,IAAI,IAAI,GAAG,CAAC,MAAM,KAAK,MAAM,CAAC,CAAC,CAAC,IAAI,CAAC;KACtD,CAAC,CAAC;CACJ;AAED;IACE,MAAM,CAAC,GAAG,CAAC,CAAC,GAAkB,EAAE,EAAE,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;CAChD;AAED,0BAA0B,KAAY;IACpC,MAAM,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,GAAQ,EAAE,KAAU,EAAE,EAAE;QAC3C,GAAG,CAAC,yBAAyB,CAAC,KAAK,CAAC,CAAC,GAAG,IAAI,CAAC;QAC7C,MAAM,CAAC,GAAG,CAAC;KACZ,EAAE,EAAE,CAAC,CAAC;CACR"
}
